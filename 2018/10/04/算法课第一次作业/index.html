<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-flash.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="作业," />





  <link rel="alternate" href="/atom.xml" title="来呀，不服抓个包~~" type="application/atom+xml" />






<meta name="description" content="一、Divide and Conquer　　You are interested in analyzing some hard-to-obtain data from two separate databases. Each database contains n numerical values, so there are 2n values total and you may assume t">
<meta name="keywords" content="作业">
<meta property="og:type" content="article">
<meta property="og:title" content="算法课第一次作业">
<meta property="og:url" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/index.html">
<meta property="og:site_name" content="来呀，不服抓个包~~">
<meta property="og:description" content="一、Divide and Conquer　　You are interested in analyzing some hard-to-obtain data from two separate databases. Each database contains n numerical values, so there are 2n values total and you may assume t">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/1.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/11.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/13.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/41.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/21.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/22.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/42.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/31.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/32.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/37.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/38.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/39.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/310.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/311.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/314.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/33.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/34.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/36.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/312.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/43.png">
<meta property="og:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/44.png">
<meta property="og:updated_time" content="2018-11-04T16:36:53.233Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="算法课第一次作业">
<meta name="twitter:description" content="一、Divide and Conquer　　You are interested in analyzing some hard-to-obtain data from two separate databases. Each database contains n numerical values, so there are 2n values total and you may assume t">
<meta name="twitter:image" content="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/"/>





  <title>算法课第一次作业 | 来呀，不服抓个包~~</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <a href="https://github.com/wangjibao" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">来呀，不服抓个包~~</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            站点地图
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangjibao.com.cn/2018/10/04/算法课第一次作业/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="大宝哥spring">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="来呀，不服抓个包~~">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">算法课第一次作业</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-04T23:56:17+08:00">
                2018-10-04
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2018-11-05T00:36:53+08:00">
                2018-11-05
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/作业，算法第一次作业/" itemprop="url" rel="index">
                    <span itemprop="name">作业，算法第一次作业</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/10/04/算法课第一次作业/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/10/04/算法课第一次作业/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2018/10/04/算法课第一次作业/" class="leancloud_visitors" data-flag-title="算法课第一次作业">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3.4k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  16 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    
    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="一、Divide-and-Conquer"><a href="#一、Divide-and-Conquer" class="headerlink" title="一、Divide and Conquer"></a>一、Divide and Conquer</h3><p>　　You are interested in analyzing some hard-to-obtain data from two separate databases. Each database contains n numerical values, so there are 2n values total and you may assume that no two values are the same. You’d like to determine the median of this set of 2n values, which we will define here to be the n-th　smallest value.</p>
<p>　　However, the only way you can access these values is through queries to the databases. In a single query, you can specify a value k to one of the two databases, and the chosen database will return the kth smallest value that it contains. Since queries are expensive, you would like to compute the median using as few queries as possible.</p>
<p>Give an algorithm that finds the median value using at most O(logn) queries.　　</p>
<h4 id="1、problem-solving-ideas-and-pseudo-code"><a href="#1、problem-solving-ideas-and-pseudo-code" class="headerlink" title="1、problem-solving ideas and pseudo-code"></a>1、problem-solving ideas and pseudo-code</h4><p>首先将现实问题转化一下，变成计算机算法问题，即 <strong>找2个有序数组的并集的中位数</strong> ，<a href="https://leetcode-cn.com/problems/median-of-two-sorted-arrays/description/" target="_blank" rel="noopener">LeetCode 第四题</a>。</p>
<p><strong>(1）problem-solving ideas</strong></p>
<p>求中位数需要根据数组长度是奇数还是偶数分别讨论，奇数长度时中位数为最中间的一个数，偶数长度时中位数为最中间的两个数的平均值，为了方便，可以实现一个比题目更一般化的函数，求A和B的第k小数的函数，那么中位数的问题很容易解决。</p>
<p>求一个有序数组的第k个数只需要O(1)的复杂度，现在有两个数组，显然花费额外空间以O(n)时间归并然后O(1)寻找不满足题目要求。既然要求log时间复杂度，一般需要使用到二分思想。</p>
<p>分别考虑A和B的第k/2个元素：</p>
<ul>
<li>如果它们相等，则第k个数为其中的任意一个</li>
<li>如果A中的比较大，则B中前k/2个元素都不可能是第k个数了，因为这个数至少应该为A的第k/2个数，把B的前k/2去掉，然后重新寻找。</li>
<li>如果B中的比较大，则把A的前k/2个数去掉，重新寻找。</li>
</ul>
<p>直到A和B中某个变为空时或者寻找第1个数时可以停止递归，直接找到结果。</p>
<p>注意，上面的k/2只是理想的简单情况，实际上A和B的长度可能不够k/2，或者k为奇数等，但这些不是主要问题，可以让A取第k/2个数字，然后A不够长，则取A的最后一个数字，然后B取剩下长度对应的那个数字，具体参考代码。</p>
<a id="more"></a>
<p><strong>(2）pseudo code</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums1, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> totalLength = nums1.size() + nums2.size();</span><br><span class="line">    <span class="keyword">if</span>( totalLength&amp;<span class="number">1</span> )</span><br><span class="line">        <span class="keyword">return</span> findKth( nums1.begin(), nums1.size(), nums2.begin(), nums2.size(), (totalLength&gt;&gt;<span class="number">1</span>)+<span class="number">1</span> );</span><br><span class="line">    <span class="keyword">else</span> <span class="comment">//除以 2.0 是为了保留小数点</span></span><br><span class="line">        <span class="keyword">return</span> (findKth( nums1.begin(), nums1.size(), nums2.begin(), nums2.size(), (totalLength&gt;&gt;<span class="number">1</span>) ) + findKth( nums1.begin(), nums1.size(), nums2.begin(), nums2.size(), (totalLength&gt;&gt;<span class="number">1</span>)+<span class="number">1</span> ))/<span class="number">2.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">findKth</span><span class="params">( <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;:: iterator nums1, <span class="keyword">int</span> len1, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;:: iterator nums2, <span class="keyword">int</span> len2, <span class="keyword">int</span> k )</span></span>&#123;</span><br><span class="line">	<span class="comment">// 默认 len1 要大于 len2</span></span><br><span class="line">    <span class="keyword">if</span>( len1&lt;len2 )</span><br><span class="line">        <span class="keyword">return</span> findKth( nums2, len2, nums1, len1, k );</span><br><span class="line">    <span class="keyword">if</span>( len2==<span class="number">0</span> )</span><br><span class="line">        <span class="keyword">return</span> nums1[k<span class="number">-1</span>];</span><br><span class="line">    <span class="keyword">if</span>( k==<span class="number">1</span> )  <span class="comment">//k==1做特判，因为后期要移位, 不做特判point-1会出现负值</span></span><br><span class="line">        <span class="keyword">return</span> min( nums1[<span class="number">0</span>], nums2[<span class="number">0</span>] );</span><br><span class="line">    <span class="keyword">int</span> point2 = min( k&gt;&gt;<span class="number">1</span>, len2 );</span><br><span class="line">    <span class="keyword">int</span> point1 = k - point2;</span><br><span class="line">    <span class="comment">//下面对 nums1[point1-1] 和 nums2[point2-1]的大小关系进行讨论</span></span><br><span class="line">    <span class="keyword">if</span>( nums1[point1<span class="number">-1</span>] &gt; nums2[point2<span class="number">-1</span>] )</span><br><span class="line">        <span class="keyword">return</span> findKth( nums1, point1, nums2+point2, len2-point2, k-point2 );</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>( nums1[point1<span class="number">-1</span>] &lt; nums2[point2<span class="number">-1</span>] )</span><br><span class="line">        <span class="keyword">return</span> findKth( nums1+point1, len1-point1, nums2, point2, k-point1 );</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> nums1[point1<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4 id="2、subproblem-reduction-graph"><a href="#2、subproblem-reduction-graph" class="headerlink" title="2、subproblem reduction graph"></a>2、subproblem reduction graph</h4><p><img src="/2018/10/04/算法课第一次作业/1.png" alt="问题缩减图"></p>
<h4 id="3、prove-the-correctness"><a href="#3、prove-the-correctness" class="headerlink" title="3、prove the correctness"></a>3、prove the correctness</h4><p>寻找两个有序数组的第K大数，那么肯定是第1个数组贡献 <strong>a</strong> 个数，第二个数组贡献 <strong>K - a</strong> 个数。首先我们假设每个数组分别贡献 <strong>K/2</strong>个数，讨论 A[k/2] 和 B[k/2] 的大小情况。</p>
<p>当 <strong>A[k/2] &gt; B[K/2]</strong> 时，很显然需要减少数组A贡献的数字的个数，增加数组B贡献的数组的个数，如下图：</p>
<p><img src="/2018/10/04/算法课第一次作业/11.png" alt=""></p>
<p>当 <strong>A[k/2] &lt; B[K/2]</strong> 时，很显然需要增加数组A贡献的数字的个数，减少数组B贡献的数组的个数，如下图：</p>
<p><img src="/2018/10/04/算法课第一次作业/13.png" alt=""></p>
<p>随着算法的执行，搜索的数组长度不断缩小，最后一定会返回对应的中位数值。</p>
<h4 id="4、the-complexity-of-this-algorithm"><a href="#4、the-complexity-of-this-algorithm" class="headerlink" title="4、the complexity of this algorithm"></a>4、the complexity of this algorithm</h4><p>分析可得：</p>
<p><img src="/2018/10/04/算法课第一次作业/41.png" alt=""></p>
<h3 id="五、Divide-and-Conquer"><a href="#五、Divide-and-Conquer" class="headerlink" title="五、Divide and Conquer"></a>五、Divide and Conquer</h3><p>　　Recall the problem of ﬁnding the number of inversions. As in the course, we are given a sequence of n numbers a1,··· ,an, which we assume are all distinct, and we deﬁne an inversion to be a pair i &lt; j such that ai &gt; aj.</p>
<p>　　We motivated the problem of counting inversions as a good measure of how diﬀerent two orderings are. However, one might feel that this measure is too sensitive. Let’s call a pair a significant inversion if i &lt; j and ai &gt; 3aj. Given an O(nlogn) algorithm to count the number of signiﬁcant inversions between two orderings.</p>
<h4 id="1、problem-solving-ideas-and-pseudo-code-1"><a href="#1、problem-solving-ideas-and-pseudo-code-1" class="headerlink" title="1、problem-solving ideas and pseudo-code"></a>1、problem-solving ideas and pseudo-code</h4><p><strong>(1）problem-solving ideas</strong></p>
<p>求数列的逆序数，除了暴力求解方式外，也可以使用归并排序、树状数组、线段树等结构进行计算。此处选择使用归并排序。</p>
<p>首先，将数组从中间切开，分为左右两半，<strong>A[0…n/2]</strong> 和 <strong>A [n/2+1…n]</strong>，分别计算这两个子问题的显著逆序数；</p>
<p>然后，计算跨左右两边的数对所形成的显著逆序的个数。</p>
<p>最后，将这三者的显著逆序数求和，即为整个数组的显著逆序数。</p>
<p><strong>(2）pseudo code</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">//统计变量num为全局变量</span><br><span class="line">void mergesort(int begin, int end)&#123;</span><br><span class="line">	if (begin &gt;= end)</span><br><span class="line">		return;</span><br><span class="line">	int mid = (begin + end) / 2;</span><br><span class="line">	mergesort(begin, mid);</span><br><span class="line">	mergesort(mid + 1, end);</span><br><span class="line">	mcount(begin, mid, end);</span><br><span class="line">	merge(begin, mid, end);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void mcount(int begin, int mid, int end)&#123;</span><br><span class="line">	int i = begin;</span><br><span class="line">	int j = mid + 1;</span><br><span class="line">	int k = begin;</span><br><span class="line">	while (i &lt;= mid &amp;&amp; j &lt;= end)&#123;</span><br><span class="line">		if (a[i] &gt; 2 * a[j])&#123;</span><br><span class="line">			num += mid - i + 1;</span><br><span class="line">			j++;</span><br><span class="line">		&#125;</span><br><span class="line">		else</span><br><span class="line">			i++;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">void merge(int begin, int mid, int end)&#123;</span><br><span class="line">	int i = begin;</span><br><span class="line">	int j = mid + 1;</span><br><span class="line">	int k = begin;</span><br><span class="line"> </span><br><span class="line">	while (i &lt;= mid &amp;&amp; j &lt;= end)&#123;</span><br><span class="line">		if (a[i] &gt; a[j])&#123;</span><br><span class="line">			temp[k] = a[j];</span><br><span class="line">			k++;</span><br><span class="line">			j++;</span><br><span class="line">		&#125;</span><br><span class="line">		else&#123;</span><br><span class="line">			temp[k] = a[i];</span><br><span class="line">			k++;</span><br><span class="line">			i++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	while (i &lt;= mid)&#123;</span><br><span class="line">		temp[k] = a[i];</span><br><span class="line">		k++;</span><br><span class="line">		i++;</span><br><span class="line">	&#125;</span><br><span class="line">	while (j &lt;= end)&#123;</span><br><span class="line">		temp[k] = a[j];</span><br><span class="line">		k++;</span><br><span class="line">		j++;</span><br><span class="line">	&#125;</span><br><span class="line">	for (int p = begin; p &lt;= end; p++)</span><br><span class="line">		a[p] = temp[p];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2、subproblem-reduction-graph-1"><a href="#2、subproblem-reduction-graph-1" class="headerlink" title="2、subproblem reduction graph"></a>2、subproblem reduction graph</h4><p>先分：</p>
<p><img src="/2018/10/04/算法课第一次作业/21.png" alt=""></p>
<p>后合：</p>
<p><img src="/2018/10/04/算法课第一次作业/22.png" alt=""></p>
<h4 id="3、prove-the-correctness-1"><a href="#3、prove-the-correctness-1" class="headerlink" title="3、prove the correctness"></a>3、prove the correctness</h4><p>其中，计算左右两边的显著逆序数的时候，会同时将左右两边的子数组变成有序。在计算跨两边的数对所形成的显著逆序的时候，就不用进行暴力遍历，只需O(n)的遍历即可。当 <strong>L[i] &gt; 3*R[j]</strong> 时，RC += |L|-i 即可，L中位于下标 i 之后的数字就不用遍历了，自然要比 3*R[j] 大。<br>同时，计算过程是基于归并排序的，整个算法即正确。</p>
<h4 id="4、the-complexity-of-this-algorithm-1"><a href="#4、the-complexity-of-this-algorithm-1" class="headerlink" title="4、the complexity of this algorithm"></a>4、the complexity of this algorithm</h4><p>计算左边的时间复杂度为 T(n/2)， 计算右边的时间复杂度为 T(n/2)， 合并的时间复杂度为 O(n)，所以总的时间复杂度为：</p>
<p><img src="/2018/10/04/算法课第一次作业/42.png" alt=""></p>
<h3 id="六、Divide-and-Conquer"><a href="#六、Divide-and-Conquer" class="headerlink" title="六、Divide and Conquer"></a>六、Divide and Conquer</h3><p>Given a table M consisting of 2n ∗ 2n blocks, we want to ﬁll it with a L-shaped module (consisting of three blocks). The L-shaped module is shown below.  </p>
<p><img src="/2018/10/04/算法课第一次作业/31.png" alt=""></p>
<p>Please give a ﬁll method, so that the last element of the table (M2n,2n) is empty.</p>
<p>For example: </p>
<p><img src="/2018/10/04/算法课第一次作业/32.png" alt=""></p>
<h4 id="1、problem-solving-ideas-and-pseudo-code-2"><a href="#1、problem-solving-ideas-and-pseudo-code-2" class="headerlink" title="1、problem-solving ideas and pseudo-code"></a>1、problem-solving ideas and pseudo-code</h4><p><strong>(1）problem-solving ideas</strong></p>
<p>　　有一个特殊方格的棋盘覆盖问题，只不过，此题目将特殊方格定死了，只能为最右下角那个，即 P(size-1,size-1)那个小方格。</p>
<p>　　该题关键在于如何划分各L型骨牌所在位置区域。我们发现，L型骨牌占三个方格，我们可以把棋盘从中央分为四块，那么这四块子棋盘中仅一块是有特殊方格的，可以用一块骨牌使得其他三块子棋盘均被覆盖。以此为原则，无论这种分法是否最终可解，我们首先保证了每个子棋盘都有一个特殊方格，所以，分治的模型就出来了。</p>
<p>　　我们可以用递归来完成分治的任务。每次递归，chess_board(int posx,int posy,int x,int y,int size)，(posx,posy)为子棋盘左上角坐标,size为子棋盘大小，因为棋盘总为正方形，所以size为边长，那么这3个参数就确定了子棋盘的位置和大小；(x,y)表示子棋盘中特殊方格的位置，这个位置是由上层递归分配骨牌后决定的。以此为标准，递归流程为：</p>
<p>①判断边界，若当前棋盘大小为1，则无法再分割，递归结束。</p>
<p>②定子棋盘中心位置。</p>
<p>③判断特殊方格所在位置（左上，右上，左下，或右下）。</p>
<p>④根据特殊方格位置确定所选L型骨牌，原特殊方格和三个L型骨牌的方格分别为四个子棋盘的特殊方格。</p>
<p>⑤依据④中判断，按编号填充棋盘。</p>
<p>⑥4次递归，分别对应四个子棋盘。</p>
<p><strong>(2）pseudo code</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">chess_board</span><span class="params">(<span class="keyword">int</span> posx,<span class="keyword">int</span> posy,<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> size)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>( size==<span class="number">1</span> )</span><br><span class="line">		<span class="keyword">return</span> ;</span><br><span class="line">	size /= <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">int</span> num = Count++;</span><br><span class="line">	<span class="comment">//左上角</span></span><br><span class="line">	<span class="keyword">if</span>( posx+size&gt;x &amp;&amp; posy+size&gt;y )</span><br><span class="line">		chess_board(posx,posy,x,y,size);</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		board[posx+size<span class="number">-1</span>][posy+size<span class="number">-1</span>] = num;</span><br><span class="line">		chess_board(posx,posy,posx+size<span class="number">-1</span>,posy+size<span class="number">-1</span>,size);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//右上角</span></span><br><span class="line">	<span class="keyword">if</span>( y&gt;=posy+size &amp;&amp; x&lt;posx+size )</span><br><span class="line">		chess_board(posx,posy+size,x,y,size);</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		board[posx+size<span class="number">-1</span>][posy+size] = num;</span><br><span class="line">		chess_board(posx,posy+size,posx+size<span class="number">-1</span>,posy+size,size);</span><br><span class="line">	&#125; </span><br><span class="line">	</span><br><span class="line">	<span class="comment">//左下角</span></span><br><span class="line">	<span class="keyword">if</span>( x&gt;=posx+size &amp;&amp; y&lt;posy+size )</span><br><span class="line">		chess_board(posx+size,posy,x,y,size);</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		board[posx+size][posy+size<span class="number">-1</span>] = num;</span><br><span class="line">		chess_board(posx+size,posy,posx+size,posy+size<span class="number">-1</span>,size);</span><br><span class="line">	&#125; </span><br><span class="line">	</span><br><span class="line">	<span class="comment">//右下角</span></span><br><span class="line">	<span class="keyword">if</span>( x&gt;=posx+size &amp;&amp; y&gt;=posy+size )</span><br><span class="line">		chess_board(posx+size,posy+size,x,y,size);</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		board[posx+size][posy+size] = num;</span><br><span class="line">		chess_board(posx+size,posy+size,posx+size,posy+size,size);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2、subproblem-reduction-graph-2"><a href="#2、subproblem-reduction-graph-2" class="headerlink" title="2、subproblem reduction graph"></a>2、subproblem reduction graph</h4><p>假设有如下图的一个棋盘，棋盘中有一个特殊方格：</p>
<p><img src="/2018/10/04/算法课第一次作业/37.png" alt=""></p>
<p>第一次分割：</p>
<p><img src="/2018/10/04/算法课第一次作业/38.png" alt=""></p>
<p>第二次分割：</p>
<p><img src="/2018/10/04/算法课第一次作业/39.png" alt=""></p>
<p>第三次分割：</p>
<p><img src="/2018/10/04/算法课第一次作业/310.png" alt=""></p>
<p>第四次分割：</p>
<p><img src="/2018/10/04/算法课第一次作业/311.png" alt=""></p>
<p>最后解的形式如下图所示（右下角空）：</p>
<p><img src="/2018/10/04/算法课第一次作业/314.png" alt=""></p>
<h4 id="3、prove-the-correctness-2"><a href="#3、prove-the-correctness-2" class="headerlink" title="3、prove the correctness"></a>3、prove the correctness</h4><p>使用数学归纳法：</p>
<p>（1）k = 1 时, 有解</p>
<p><img src="/2018/10/04/算法课第一次作业/33.png" alt=""></p>
<p>（2）k = 2 时，有解：</p>
<p><img src="/2018/10/04/算法课第一次作业/34.png" alt=""></p>
<p>（3）设 k-1 时成立(k&gt;2)，将 2^k <em> 2^k 棋盘分割为 4 个 2^(k-1) </em> 2^(k-1) 子棋盘，如下图所示：</p>
<p><img src="/2018/10/04/算法课第一次作业/36.png" alt=""></p>
<p>特殊方格必位于 4 个较小子棋盘之一中，其余 3 个子棋盘中无特殊方格。为了将这 3 个无特殊方格的子棋盘转化为特殊盘，我们可以用一个 L 型骨牌覆盖这 3 个较小的棋盘的汇合处，如下图所示，这 3 个子棋盘上被 L 型骨牌覆盖的方格就成为该棋盘上的特殊方格，从而将原问题化为 4 个较小规模的棋盘覆盖问题。递归的使用这种分割，直至棋盘简化为 2^1x2^1 棋盘。</p>
<p><img src="/2018/10/04/算法课第一次作业/312.png" alt=""></p>
<p>综上可得，该算法正确，最终可求得想要的结果。</p>
<h4 id="4、the-complexity-of-this-algorithm-2"><a href="#4、the-complexity-of-this-algorithm-2" class="headerlink" title="4、the complexity of this algorithm"></a>4、the complexity of this algorithm</h4><p>算法的时间复杂度递推式如下：</p>
<p><img src="/2018/10/04/算法课第一次作业/43.png" alt=""></p>
<p>即：</p>
<p><img src="/2018/10/04/算法课第一次作业/44.png" alt=""></p>
<h3 id="七、OJ第一题（寻找第K大数）"><a href="#七、OJ第一题（寻找第K大数）" class="headerlink" title="七、OJ第一题（寻找第K大数）"></a>七、OJ第一题（寻找第K大数）</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findKthLargest</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; small, big;</span><br><span class="line">        srand(time(<span class="literal">NULL</span>));</span><br><span class="line">        <span class="keyword">int</span> pivotIndex = rand()%nums.size();</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> i=<span class="number">0</span>; i&lt;nums.size(); i++ )&#123;</span><br><span class="line">            <span class="keyword">if</span>( i==pivotIndex )</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>( nums[i]&gt;nums[pivotIndex] )</span><br><span class="line">                big.push_back(nums[i]);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                small.push_back(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>( big.size() == k<span class="number">-1</span> )</span><br><span class="line">            <span class="keyword">return</span> nums[pivotIndex];</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>( big.size() &gt; k<span class="number">-1</span> )</span><br><span class="line">            <span class="keyword">return</span> findKthLargest( big, k );</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> findKthLargest( small, k-big.size()<span class="number">-1</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, k;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec;</span><br><span class="line">    <span class="keyword">int</span> num;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++ )&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;num);</span><br><span class="line">        vec.push_back(num);</span><br><span class="line">    &#125;</span><br><span class="line">    Solution s;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; s.findKthLargest(vec,k) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="八、OJ第二题（二维最近点对）"><a href="#八、OJ第二题（二维最近点对）" class="headerlink" title="八、OJ第二题（二维最近点对）"></a>八、OJ第二题（二维最近点对）</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt; pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; &gt; point;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">calcDist</span><span class="params">( pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; p1, pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; p2 )</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (p1.first-p2.first)*(p1.first-p2.first) + (p1.second-p2.second)*(p1.second-p2.second);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">compare_x</span><span class="params">( pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; p1, pair&lt;<span class="keyword">double</span>,<span class="keyword">double</span>&gt; p2 )</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p1.first&lt;p2.first;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">compare_y</span><span class="params">( pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; p1, pair&lt;<span class="keyword">double</span>,<span class="keyword">double</span>&gt; p2 )</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p1.second&lt;p2.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pair&lt; pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt;, pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; &gt; solution( <span class="built_in">vector</span>&lt; pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; &gt;&amp; vec )&#123;</span><br><span class="line">    <span class="keyword">if</span>( vec.size()&lt;=<span class="number">3</span> )&#123; <span class="comment">//当点的个数小于3个时，直接暴力求解,想一下为啥是3</span></span><br><span class="line">        pair&lt; pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt;, pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; &gt; ans = make_pair(vec[<span class="number">0</span>], vec[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">if</span>( vec.size()==<span class="number">3</span> )&#123;</span><br><span class="line">            <span class="keyword">double</span> dst01 = calcDist( vec[<span class="number">0</span>], vec[<span class="number">1</span>] );</span><br><span class="line">            <span class="keyword">double</span> dst12 = calcDist( vec[<span class="number">1</span>], vec[<span class="number">2</span>] );</span><br><span class="line">            <span class="keyword">if</span>( dst01&gt;dst12 )</span><br><span class="line">                ans = make_pair(vec[<span class="number">1</span>], vec[<span class="number">2</span>]);</span><br><span class="line">            <span class="keyword">double</span> dst02 = calcDist( vec[<span class="number">0</span>], vec[<span class="number">2</span>] );</span><br><span class="line">            <span class="keyword">if</span>( calcDist(ans.first, ans.second)&gt;dst02 )</span><br><span class="line">                ans = make_pair(vec[<span class="number">0</span>], vec[<span class="number">2</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//分开,左右两部分</span></span><br><span class="line">    sort( vec.begin(), vec.end(), compare_x );  <span class="comment">//并不是使用pivot，直接分一半过去</span></span><br><span class="line">    <span class="built_in">vector</span>&lt; pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; &gt; pointLeft( vec.size()/<span class="number">2</span> );</span><br><span class="line">    copy( vec.begin(), vec.begin()+vec.size()/<span class="number">2</span>, pointLeft.begin() );</span><br><span class="line">    <span class="built_in">vector</span>&lt; pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; &gt; pointRight( vec.size() - vec.size()/<span class="number">2</span> );</span><br><span class="line">    copy( vec.begin()+vec.size()/<span class="number">2</span>, vec.end(), pointRight.begin() );</span><br><span class="line">  </span><br><span class="line">    pair&lt; pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt;, pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; &gt; ansLeft = solution( pointLeft );</span><br><span class="line">    pair&lt; pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt;, pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; &gt; ansRight = solution( pointRight );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">double</span> dst = calcDist(ansLeft.first, ansLeft.second);</span><br><span class="line">    pair&lt; pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt;, pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; &gt; ans = ansLeft;</span><br><span class="line">    <span class="keyword">if</span>( calcDist(ansLeft.first, ansLeft.second) &gt; calcDist(ansRight.first, ansRight.second) )&#123;</span><br><span class="line">        ans = ansRight;</span><br><span class="line">        dst = calcDist(ansRight.first, ansRight.second);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//计算中间</span></span><br><span class="line">    <span class="keyword">double</span> pivot = ( pointLeft[pointLeft.size()<span class="number">-1</span>].first + pointRight[<span class="number">0</span>].first ) / <span class="number">2.0</span>;</span><br><span class="line">    <span class="built_in">vector</span>&lt; pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; &gt; pointMiddle;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i=<span class="number">0</span>; i&lt;vec.size(); i++ )&#123;</span><br><span class="line">        <span class="keyword">if</span>( (pivot-vec[i].first)*(pivot-vec[i].first) &lt; dst )</span><br><span class="line">            pointMiddle.push_back( vec[i] );</span><br><span class="line">    &#125;</span><br><span class="line">    sort( pointMiddle.begin(), pointMiddle.end(), compare_y );</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i=<span class="number">0</span>; i&lt;pointMiddle.size(); i++ )&#123;</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=<span class="number">7</span> &amp;&amp; (i+j)&lt;pointMiddle.size(); j++ )&#123;</span><br><span class="line">            <span class="keyword">if</span>( calcDist( pointMiddle[i], pointMiddle[i+j] ) &lt; dst )&#123;</span><br><span class="line">                dst = calcDist( pointMiddle[i], pointMiddle[i+j] );</span><br><span class="line">                ans = make_pair( pointMiddle[i], pointMiddle[i+j] );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">double</span> x, y;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++ )&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lf %lf"</span>, &amp;x, &amp;y);</span><br><span class="line">        point.push_back( make_pair(x,y) );</span><br><span class="line">    &#125;</span><br><span class="line">    pair&lt; pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt;, pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; &gt; ans;</span><br><span class="line">    ans = solution(point);</span><br><span class="line">    <span class="keyword">double</span> mindst = calcDist( ans.first, ans.second );</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.2f\n"</span>, <span class="built_in">sqrt</span>(<span class="number">1.0</span>*mindst));</span><br><span class="line">    <span class="comment">//cout &lt;&lt; "(" &lt;&lt; ans.first.first &lt;&lt; "," &lt;&lt; ans.first.second &lt;&lt; ")" &lt;&lt; ",  (" &lt;&lt; ans.second.first &lt;&lt; "," &lt;&lt; ans.second.second &lt;&lt; ")" &lt;&lt; endl;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <div>
      
          <div> 
     
      	<div style="text-align:center;color: #ccc;font-size:14px;">
            -------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------
        </div>
     
</div>
      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>您的鼓励就是我创作的动力，求打赏买面包~~</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.png" alt="大宝哥spring 微信支付"/>
        <p>微信支付</p>
      </div>
    

    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/作业/" rel="tag"><i class="fa fa-tag"></i> 作业</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/09/29/矩阵求导/" rel="next" title="矩阵求导">
                <i class="fa fa-chevron-left"></i> 矩阵求导
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/10/04/Ubuntu16-04安装Tensorflow-GPU/" rel="prev" title="Ubuntu16.04安装Tensorflow-GPU">
                Ubuntu16.04安装Tensorflow-GPU <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.gif"
                alt="大宝哥spring" />
            
              <p class="site-author-name" itemprop="name">大宝哥spring</p>
              <p class="site-description motion-element" itemprop="description">机会总是留给有准备的人</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="mailto:wangjibao1995@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="skype:1625888175?call|chat" target="_blank" title="Skype">
                      
                        <i class="fa fa-fw fa-skype"></i>Skype</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                友链推荐
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://0clay.top/" title="0clay" target="_blank">0clay</a>
                  </li>
                
              </ul>
            </div>
          
          
          
      			<div class="links-of-blogroll motion-element links-of-blogroll-block">
      			  <div class="links-of-blogroll-title">
      			    <!-- modify icon to fire by szw -->
      			    <i class="fa fa-history fa-" aria-hidden="true"></i>
      			    近期文章
      			  </div>
      			  <ul class="links-of-blogroll-list">
      			    
      			    
      			      <li>
      			        <a href="/2018/11/05/算法课第二次作业/" title="算法课第二次作业" target="_blank">算法课第二次作业</a>
      			      </li>
      			    
      			      <li>
      			        <a href="/2018/11/04/数据科学导论作业/" title="数据科学导论作业" target="_blank">数据科学导论作业</a>
      			      </li>
      			    
      			      <li>
      			        <a href="/2018/10/20/LeetCode21-30/" title="LeetCode21-30" target="_blank">LeetCode21-30</a>
      			      </li>
      			    
      			      <li>
      			        <a href="/2018/10/17/背包九讲/" title="背包九讲" target="_blank">背包九讲</a>
      			      </li>
      			    
      			      <li>
      			        <a href="/2018/10/12/Ubuntu中配置SS多用户模式并限制每个用户的流量/" title="Ubuntu中配置SS多用户模式并限制每个用户的流量" target="_blank">Ubuntu中配置SS多用户模式并限制每个用户的流量</a>
      			      </li>
      			    
      			  </ul>
      			</div>
      		

          <!-- CloudCalendar -->
          <div class="widget-wrap" style="width: 90%;margin-left: auto;margin-right: auto; opacity: 0.97;">
            <div class="widget" id="CloudCalendar"></div>
          </div>

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、Divide-and-Conquer"><span class="nav-text">一、Divide and Conquer</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、problem-solving-ideas-and-pseudo-code"><span class="nav-text">1、problem-solving ideas and pseudo-code</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、subproblem-reduction-graph"><span class="nav-text">2、subproblem reduction graph</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、prove-the-correctness"><span class="nav-text">3、prove the correctness</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、the-complexity-of-this-algorithm"><span class="nav-text">4、the complexity of this algorithm</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#五、Divide-and-Conquer"><span class="nav-text">五、Divide and Conquer</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、problem-solving-ideas-and-pseudo-code-1"><span class="nav-text">1、problem-solving ideas and pseudo-code</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、subproblem-reduction-graph-1"><span class="nav-text">2、subproblem reduction graph</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、prove-the-correctness-1"><span class="nav-text">3、prove the correctness</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、the-complexity-of-this-algorithm-1"><span class="nav-text">4、the complexity of this algorithm</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#六、Divide-and-Conquer"><span class="nav-text">六、Divide and Conquer</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、problem-solving-ideas-and-pseudo-code-2"><span class="nav-text">1、problem-solving ideas and pseudo-code</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、subproblem-reduction-graph-2"><span class="nav-text">2、subproblem reduction graph</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、prove-the-correctness-2"><span class="nav-text">3、prove the correctness</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、the-complexity-of-this-algorithm-2"><span class="nav-text">4、the complexity of this algorithm</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#七、OJ第一题（寻找第K大数）"><span class="nav-text">七、OJ第一题（寻找第K大数）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#八、OJ第二题（二维最近点对）"><span class="nav-text">八、OJ第二题（二维最近点对）</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">大宝哥spring</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">本站共计&#58;</span>
    
    <span title="本站共计">19.8k 字</span>
  
</div>









        
<div class="busuanzi-count">
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i> 你是本站的第
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      位访问者
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i> 本站总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    
      <div id="needsharebutton-float">
        <span class="btn">
          <i class="fa fa-share-alt" aria-hidden="true"></i>
        </span>
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'B31yiwrejjIOHiBSE6OpWt5u-gzGzoHsz',
        appKey: 'iK4kp1lzdo6WOfMHzUm0CJMG',
        placeholder: '来呀，互相交流，互相伤害啊~~~',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("B31yiwrejjIOHiBSE6OpWt5u-gzGzoHsz", "iK4kp1lzdo6WOfMHzUm0CJMG");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  
  
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">

  
  
  <script src="/lib/needsharebutton/needsharebutton.js"></script>

  <script>
    
    
      flOptions = {};
      
          flOptions.iconStyle = "default";
      
          flOptions.boxForm = "horizontal";
      
          flOptions.position = "middleRight";
      
          flOptions.networks = "Weibo,Wechat,QQZone,Evernote,Facebook";
      
      new needShareButton('#needsharebutton-float', flOptions);
    
  </script>

  

  
  


  

  

  <!-- calendar widget -->


    <script src="/lib/CloudCalendar/CloudCalendar.min.js"></script>
    <script src="/lib/CloudCalendar/languages.min.js"></script>
    <script type="text/javascript">
    $(function() {
        $('#CloudCalendar').aCalendar('zh-CN', 
            $.extend(
                '', {
                    single:true,
                    root:'/calendar/'
                }
            )
        );
    });
    </script>



  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/src/love.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"left","width":80,"height":300,"hOffset":20,"vOffset":-200},"mobile":{"show":true},"log":false,"tagMode":false});</script></body>
</html>
